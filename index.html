<!DOCTYPE html>
<html lang="en" class="h-full">
  <head>
    <meta charset="utf-8" />
    <title>Exmony Rates</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background: linear-gradient(
          to bottom right,
          #0f172a,
          #1e293b,
          #0f172a
        ) !important;
        color: white;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 3rem;
        width: 100%;
        height: 100vh;
        position: relative;
        margin: 0;
      }
      .rotate-page {
        transform: rotate(90deg);
        transform-origin: center center;
        width: 100vh;
        height: 100vw;
        overflow: hidden;
        position: absolute;
        top: 0;
        left: 0;
      }
      .wrapper {
        position: absolute;
        top: -100vw;
        left: 0;
        width: 100vh;
        height: 100vw;
        transform: rotate(90deg);
        transform-origin: bottom left;
      }
      #fullscreen-button {
        position: fixed;
        top: 20px;
        left: 20px;
        z-index: 1000;
        background: rgba(0, 0, 0, 0.7);
        border: none;
        border-radius: 8px;
        padding: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        color: white;
      }
      
      #fullscreen-button:hover {
        background: rgba(0, 0, 0, 0.9);
        transform: scale(1.1);
      }
      
      #fullscreen-button svg {
        width: 24px;
        height: 24px;
        fill: currentColor;
      }
      
      #fullscreen-button svg:last-child {
        display: none;
      }
      
      #fullscreen-button[fullscreen] svg:first-child {
        display: none;
      }
      
      #fullscreen-button[fullscreen] svg:last-child {
        display: block;
      }
      
      #play-video-button {
        position: fixed;
        top: 20px;
        left: 80px;
        z-index: 1000;
        background: rgba(0, 0, 0, 0.7);
        border: none;
        border-radius: 8px;
        padding: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        color: white;
      }
      
      #play-video-button:hover {
        background: rgba(0, 0, 0, 0.9);
        transform: scale(1.1);
      }
      
      #play-video-button svg {
        width: 24px;
        height: 24px;
        fill: currentColor;
      }
      
      #video-player {
        position: fixed;
        top: -100vw;
        left: 0;
        width: 100vh;
        height: 100vw;
        z-index: 9999;
        background: black;
        display: none;
        transform: rotate(90deg);
        transform-origin: bottom left;
      }
      
      #video-player video {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
      
      #video-close {
        position: absolute;
        top: 20px;
        right: 20px;
        background: rgba(0, 0, 0, 0.7);
        border: none;
        border-radius: 8px;
        padding: 12px;
        cursor: pointer;
        color: white;
        font-size: 24px;
        z-index: 10000;
      }

      .table-card {
        background: rgba(30, 41, 59, 0.5);
        border: 1px solid rgba(100, 116, 139, 0.3);
        border-radius: 1rem;
        padding: 1.5rem;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .table-card:hover {
        background: rgba(30, 41, 59, 0.8);
        border-color: rgba(100, 116, 139, 0.6);
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
      }

      .loading-spinner {
        border: 3px solid rgba(255, 255, 255, 0.1);
        border-top: 3px solid white;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
    </style>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  </head>

  <div class="wrapper overflow-hidden" id="mainContent">
    <body>
      <!-- Video Player Overlay -->
      <div id="video-player">
        <video id="video-element" muted autoplay>
          <source src="vid_to_play.mp4" type="video/mp4">
        </video>
        <button id="video-close" onclick="closeVideo()">✕</button>
      </div>

      <!-- Table Selection Page -->
      <div id="table-selection" class="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white flex flex-col items-center justify-center p-6">
        <div class="text-center mb-12">
          <h1 class="text-6xl lg:text-7xl font-bold mb-6 bg-gradient-to-r from-gray-300 via-gray-400 to-gray-500 bg-clip-text text-transparent animate-pulse">
            Exmony
          </h1>
          <p class="text-xl lg:text-2xl text-slate-300 font-light">
            Live Currency Exchange Rates
          </p>
        </div>

        <div id="loading-tables" class="text-center">
          <div class="loading-spinner mx-auto mb-4"></div>
          <p class="text-slate-400">Loading available tables...</p>
        </div>

        <div id="tables-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl w-full" style="display: none;">
          <!-- Tables will be populated here -->
        </div>

        <div id="no-tables" class="text-center" style="display: none;">
          <p class="text-slate-400 text-lg">No tables available at the moment.</p>
        </div>

        <footer class="text-center mt-16 text-slate-400 text-sm">
          Powered By
          <span
            class="text-yellow-400 font-semibold ml-1"
            style="
              text-shadow: 0 0 6px rgba(250, 204, 21, 0.9),
                0 0 12px rgba(250, 204, 21, 0.6);
            "
          >
            Apegres®
          </span>
        </footer>
      </div>

      <!-- Individual Table Display -->
      <div id="table-display" style="display: none;">
        <div
          class="absolute inset-0 bg-black from-slate-800/20 via-slate-900/10 to-transparent"
        />

        <div
          id="branchLabel"
          class="fixed top-4 right-4 text-2xl text-white font-bold text-center bg-gradient-to-r from-gray-300 via-gray-400 to-gray-500 bg-clip-text text-transparent animate-pulse drop-shadow-2xl"
        >
          Loading…
        </div>

        <img
          src="logo.png"
          class="fixed w-45 h-40 top-20 left-4 animate-pulse drop-shadow-2xl"
        />

        <div
          class="bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white flex flex-col items-center justify-start mt-[25rem] p-12 w-full h-full relative"
        >
          <!-- Light background glow -->
          <div
            class="absolute top-1/4 left-1/2 w-80 h-80 transform -translate-x-1/2 -translate-y-1/2 rounded-full bg-gradient-to-tr from-indigo-500/10 to-purple-500/10 blur-3xl pointer-events-none"
          ></div>

          <h1
            class="text-7xl lg:text-8xl font-bold mb-14 mt-16 bg-gradient-to-r from-gray-300 via-gray-400 to-gray-500 bg-clip-text text-transparent animate-pulse drop-shadow-2xl relative z-10 text-center"
          >
            Exmony
          </h1>

          <div class="w-full max-w-7xl relative z-10">
            <div
              class="bg-gradient-to-r from-slate-800/50 via-slate-700/50 to-slate-800/50 backdrop-blur-xl border border-slate-500/30 rounded-3xl overflow-hidden shadow-2xl shadow-black/20"
            >
              <table class="w-full text-left table-auto" id="ratesTable">
                <thead
                  class="bg-gradient-to-r from-gray-600/20 via-slate-600/20 to-gray-600/20 text-slate-200 border-b border-slate-400/30"
                >
                  <tr>
                    <th
                      class="p-2 font-bold text-lg lg:text-2xl uppercase text-center"
                    >
                      Currency
                    </th>
                    <th
                      class="p-2 font-bold text-lg lg:text-2xl uppercase text-center"
                    >
                      Buy
                    </th>
                    <th
                      class="p-2 font-bold text-lg lg:text-2xl uppercase text-center"
                    >
                      Sell
                    </th>
                    <th
                      class="p-2 font-bold text-lg lg:text-2xl uppercase text-center"
                    >
                      Notable Rate
                    </th>
                  </tr>
                </thead>
                <tbody
                  id="ratesBody"
                  class="divide-y divide-slate-700/50 text-2xl lg:text-3xl"
                ></tbody>
              </table>
            </div>

            <!-- New Content Section Below Table -->
            <div class="mt-12 text-center relative z-10">
              <!-- Main Slogan -->
              <div class="mb-8">
                <h2
                  class="text-4xl lg:text-5xl font-bold mb-4 bg-gradient-to-r from-gray-300 via-gray-400 to-gray-500 bg-clip-text text-transparent"
                >
                  "Your Gateway to Global Currency"
                </h2>
                <p class="text-xl lg:text-2xl text-slate-300 font-light">
                  Real-time rates • Trusted service • Seamless exchange
                </p>
              </div>

              <!-- Key Features -->
              <div class="grid grid-cols-3 gap-8 mt-10">
                <div
                  class="bg-gradient-to-br from-slate-800/40 via-slate-700/40 to-slate-800/40 backdrop-blur-sm border border-slate-600/30 rounded-2xl p-6"
                >
                  <div class="text-3xl mb-3">⚡</div>
                  <h3 class="text-lg font-semibold text-slate-200 mb-2">
                    Live Updates
                  </h3>
                  <p class="text-sm text-slate-400">
                    Real-time currency rates updated instantly
                  </p>
                </div>

                <div
                  class="bg-gradient-to-br from-slate-800/40 via-slate-700/40 to-slate-800/40 backdrop-blur-sm border border-slate-600/30 rounded-2xl p-6"
                >
                  <div class="text-3xl mb-3">🔒</div>
                  <h3 class="text-lg font-semibold text-slate-200 mb-2">
                    Secure Trading
                  </h3>
                  <p class="text-sm text-slate-400">
                    Safe and reliable currency exchange
                  </p>
                </div>

                <div
                  class="bg-gradient-to-br from-slate-800/40 via-slate-700/40 to-slate-800/40 backdrop-blur-sm border border-slate-600/30 rounded-2xl p-6"
                >
                  <div class="text-3xl mb-3">🌍</div>
                  <h3 class="text-lg font-semibold text-slate-200 mb-2">
                    Global Reach
                  </h3>
                  <p class="text-sm text-slate-400">
                    Multiple currencies from around the world
                  </p>
                </div>
              </div>

            <!-- Decorative elements -->
            <div
              class="absolute -top-6 -left-8 w-40 h-40 bg-gradient-to-r from-gray-600 to-slate-700 rounded-full blur-xl opacity-20 animate-pulse"
            ></div>
            <div
              class="absolute -bottom-8 -right-8 w-48 h-48 bg-gradient-to-r from-gray-500 to-slate-600 rounded-full blur-xl opacity-20 animate-pulse delay-1000"
            ></div>
          </div>
        </div>
      </div>

      <script>
        // Get table ID from URL parameters
        function getTableIdFromUrl() {
          const urlParams = new URLSearchParams(window.location.search);
          return urlParams.get('table');
        }

        // Read initial scaling factor (URL param `scale` → localStorage → default 100)
        let latestTableData = null;
        let zoomFactor = (function () {
          const urlParams = new URLSearchParams(window.location.search);
          const fromUrl = parseFloat(urlParams.get('zoom') || '');
          if (!Number.isNaN(fromUrl) && fromUrl > 0) return Math.round(fromUrl);
          const fromStorage = parseFloat(localStorage.getItem('zoomFactor') || '');
          if (!Number.isNaN(fromStorage) && fromStorage > 0) return Math.round(fromStorage);
          return 100;
        })();

        function setZoomFactor(next) {
          const clamped = Math.max(50, Math.min(200, Math.round(next)));
          zoomFactor = clamped;
          localStorage.setItem('zoomFactor', String(clamped));
          const label = document.getElementById('zoom-value');
          const range = document.getElementById('zoom-range');
          if (label) label.textContent = `${clamped}%`;
          if (range) range.value = String(clamped);
          
          // Apply scaling to font sizes and element sizes
          const scale = clamped / 100;
          const root = document.documentElement;
          
          // Scale font sizes
          root.style.setProperty('--scale-factor', String(scale));
          
          // Apply scaling to specific elements
          const elements = {
            'h1': { fontSize: `${Math.round(7 * scale)}rem` },
            'h2': { fontSize: `${Math.round(4 * scale)}rem` },
            'p': { fontSize: `${Math.round(1.5 * scale)}rem` },
            'th': { fontSize: `${Math.round(1.8 * scale)}rem`, padding: `${Math.round(0.5 * scale)}rem` },
            'td': { fontSize: `${Math.round(2.2 * scale)}rem`, padding: `${Math.round(0.5 * scale)}rem` },
            '.currency-code': { fontSize: `${Math.round(2.2 * scale)}rem` },
            '.branch-label': { fontSize: `${Math.round(2 * scale)}rem` },
            '.feature-title': { fontSize: `${Math.round(1.2 * scale)}rem` },
            '.feature-text': { fontSize: `${Math.round(0.9 * scale)}rem` }
          };
          
          // Apply styles
          Object.entries(elements).forEach(([selector, styles]) => {
            const els = document.querySelectorAll(selector);
            els.forEach(el => {
              Object.entries(styles).forEach(([prop, value]) => {
                el.style[prop] = value;
              });
            });
          });
          
          // Scale table cell content
          const tableCells = document.querySelectorAll('td, th');
          tableCells.forEach(cell => {
            cell.style.fontSize = `${Math.round(2.2 * scale)}rem`;
            cell.style.padding = `${Math.round(0.5 * scale)}rem`;
          });
          
          // Scale currency code spans
          const currencySpans = document.querySelectorAll('td span');
          currencySpans.forEach(span => {
            span.style.fontSize = `${Math.round(2.2 * scale)}rem`;
          });
          
          // Scale branch label
          const branchLabel = document.getElementById('branchLabel');
          if (branchLabel) {
            branchLabel.style.fontSize = `${Math.round(2 * scale)}rem`;
          }
          
          // Scale feature cards
          const featureTitles = document.querySelectorAll('.feature-title');
          featureTitles.forEach(title => {
            title.style.fontSize = `${Math.round(1.2 * scale)}rem`;
          });
          
          const featureTexts = document.querySelectorAll('.feature-text');
          featureTexts.forEach(text => {
            text.style.fontSize = `${Math.round(0.9 * scale)}rem`;
          });
        }

        function initZoomControl() {
          if (document.getElementById('zoom-control')) return; // already added
          const ctrl = document.createElement('div');
          ctrl.id = 'zoom-control';
          ctrl.style.cssText = [
            'position:fixed',
            'top:20px',
            'left:140px',
            'z-index:1000',
            'background:rgba(0,0,0,0.7)',
            'padding:8px 12px',
            'border-radius:8px',
            'display:flex',
            'align-items:center',
            'gap:8px',
            'color:white',
            'backdrop-filter: blur(4px)'
          ].join(';');

          ctrl.innerHTML = `
            <button id="zoom-out" style="background:#1f2937;border:1px solid #334155;color:white;border-radius:6px;padding:4px 8px;cursor:pointer">-</button>
            <span id="zoom-value" style="min-width:52px;text-align:center">${zoomFactor}%</span>
            <input id="zoom-range" type="range" min="50" max="200" step="5" value="${zoomFactor}" style="width:180px">
            <button id="zoom-in" style="background:#1f2937;border:1px solid #334155;color:white;border-radius:6px;padding:4px 8px;cursor:pointer">+</button>
            <button id="zoom-reset" title="Reset" style="background:#1f2937;border:1px solid #334155;color:white;border-radius:6px;padding:4px 8px;cursor:pointer">100%</button>
            <button id="zoom-toggle" title="Hide/Show" style="background:#1f2937;border:1px solid #334155;color:white;border-radius:6px;padding:4px 8px;cursor:pointer">×</button>
          `;

          document.body.appendChild(ctrl);

          document.getElementById('zoom-out')?.addEventListener('click', () => setZoomFactor(zoomFactor - 5));
          document.getElementById('zoom-in')?.addEventListener('click', () => setZoomFactor(zoomFactor + 5));
          document.getElementById('zoom-reset')?.addEventListener('click', () => setZoomFactor(100));
          document.getElementById('zoom-range')?.addEventListener('input', (e) => {
            const target = e.target;
            const val = parseFloat(target && target.value ? target.value : '');
            if (!Number.isNaN(val)) setZoomFactor(val);
          });
          
          // Toggle hide/show functionality
          let isZoomControlHidden = false;
          document.getElementById('zoom-toggle')?.addEventListener('click', () => {
            const controls = document.querySelectorAll('#zoom-out, #zoom-value, #zoom-range, #zoom-in, #zoom-reset');
            const toggleBtn = document.getElementById('zoom-toggle');
            
            if (isZoomControlHidden) {
              // Show controls
              controls.forEach(control => {
                control.style.display = 'block';
              });
              toggleBtn.textContent = '×';
              toggleBtn.title = 'Hide';
              isZoomControlHidden = false;
            } else {
              // Hide controls
              controls.forEach(control => {
                control.style.display = 'none';
              });
              toggleBtn.textContent = '⚙';
              toggleBtn.title = 'Show';
              isZoomControlHidden = true;
            }
          });

          // Keyboard shortcuts: +/- to adjust zoom
          window.addEventListener('keydown', (e) => {
            if (e.key === '+' || e.key === '=') setZoomFactor(zoomFactor + 5);
            if (e.key === '-') setZoomFactor(zoomFactor - 5);
            if ((e.key === '0' || e.key === 'r' || e.key === 'R') && (e.ctrlKey || e.metaKey)) {
              e.preventDefault();
              setZoomFactor(100);
            }
          });
        }

        // Get table ID from URL
        const tableId = getTableIdFromUrl();
        
        if (!tableId) {
          // Show table selection page
          showTableSelection();
        } else {
          // Show individual table display
          showTableDisplay(tableId);
        }

        function showTableSelection() {
          document.getElementById('table-selection').style.display = 'block';
          document.getElementById('table-display').style.display = 'none';
          loadAvailableTables();
        }

        function showTableDisplay(tableId) {
          document.getElementById('table-selection').style.display = 'none';
          document.getElementById('table-display').style.display = 'block';
          initZoomControl();
          loadTableData(tableId);
        }

        function loadAvailableTables() {
          fetch('https://api.exmony.ge/rate-tables')
            .then((res) => {
              if (!res.ok) {
                throw new Error(`HTTP error! status: ${res.status}`);
              }
              return res.json();
            })
            .then((tables) => {
              document.getElementById('loading-tables').style.display = 'none';
              
              if (!tables || tables.length === 0) {
                document.getElementById('no-tables').style.display = 'block';
                return;
              }

              const tablesGrid = document.getElementById('tables-grid');
              tablesGrid.style.display = 'grid';

              tables.forEach((table) => {
                const tableCard = document.createElement('div');
                tableCard.className = 'table-card';
                tableCard.onclick = () => {
                  window.location.href = `?table=${table._id}`;
                };

                tableCard.innerHTML = `
                  <div class="text-center">
                    <h3 class="text-2xl font-bold text-slate-200 mb-2">${table.name}</h3>
                    <p class="text-slate-400 mb-4">${table.currencies?.length || 0} currencies available</p>
                    <div class="text-sm text-slate-500">Click to view live rates</div>
                  </div>
                `;

                tablesGrid.appendChild(tableCard);
              });
            })
            .catch((err) => {
              console.error('Failed to load tables:', err);
              document.getElementById('loading-tables').style.display = 'none';
              document.getElementById('no-tables').style.display = 'block';
            });
        }

        function loadTableData(tableId) {
          const API_URL = `https://api.exmony.ge/rate-tables/${tableId}`;
          const WS_URL = "https://api.exmony.ge";
          let currentTableId = null;

          function createCell(txt, extraCls) {
            const td = document.createElement("td");
            td.className = "p-2 text-center " + (extraCls || "");
            td.textContent = txt;
            return td;
          }

                     function render(table) {
             document.getElementById("branchLabel").textContent =
               (table.name || "Unknown") + " Branch";
             const tbody = document.getElementById("ratesBody");
             tbody.innerHTML = "";

             (table.currencies || []).forEach((cur) => {
               const tr = document.createElement("tr");
               tr.setAttribute("data-code", cur.code);
               tr.className =
                 "hover:bg-gradient-to-r hover:from-slate-800/20 hover:via-slate-700/20 hover:to-slate-800/20 transition-all duration-300 group";

               const td0 = document.createElement("td");
               td0.className =
                 "flex items-center text-center justify-center gap-4 p-2";

               if (cur.image) {
                 const imgWrap = document.createElement("div");
                 imgWrap.className = "relative";
                 const img = new Image();
                 img.src = cur.image;
                 img.alt = cur.label;
                 img.width = 64;
                 img.height = 64;
                 img.className = "object-cover transition-all duration-300";
                 imgWrap.appendChild(img);

                 const overlay = document.createElement("div");
                 overlay.className =
                   "absolute inset-0 rounded-lg bg-gradient-to-tr from-slate-300/20 to-slate-400/20 group-hover:from-slate-300/40 group-hover:to-slate-400/40 transition-all duration-300";
                 imgWrap.appendChild(overlay);

                 td0.appendChild(imgWrap);
               }

               const span = document.createElement("span");
               span.className =
                 "font-mono font-bold text-2xl lg:text-3xl text-slate-300 group-hover:text-slate-200 transition-colors duration-300";

               span.textContent = cur.code;
               td0.appendChild(span);
               tr.appendChild(td0);

               tr.appendChild(
                 createCell(cur.buyRate, "buy text-green-400 font-bold")
               );
               tr.appendChild(
                 createCell(cur.sellRate, "sell text-yellow-400 font-bold")
               );
               tr.appendChild(
                 createCell(cur.notableRate, "notable text-blue-400 font-bold")
               );

               tbody.appendChild(tr);
             });
             
             // Apply current scaling to newly rendered content
             setZoomFactor(zoomFactor);
           }

          // Apply initial zoom
          setZoomFactor(zoomFactor);

          fetch(API_URL)
            .then((res) => {
              if (!res.ok) {
                throw new Error(`HTTP error! status: ${res.status}`);
              }
              return res.json();
            })
                         .then((table) => {
               if (!table) throw new Error("No data received.");
               currentTableId = table._id;
               latestTableData = table;
               render(table);
               initSocket(currentTableId);
             })
            .catch((err) => {
              console.error("Initial fetch failed:", err);
              // Redirect back to table selection if table not found
              window.location.href = '/';
            });

          function initSocket(tableId) {
            const socket = io(WS_URL, {
              transports: ["websocket"],
              withCredentials: true,
            });

            socket.on("connect", () => {
              console.log("✅ Socket connected:", socket.id);
              socket.emit("joinRoom", tableId);
            });

            socket.on("table:update", (data) => {
              console.log("📡 Live update:", data);
              if (data._id === tableId) {
                latestTableData = data;
                render(data);
              }
            });

            socket.on("disconnect", () => {
              console.warn("⚠️ Socket disconnected");
            });
          }
        }

        // Fullscreen functionality
        if (document.fullscreenEnabled) {
          const fullscreen_button = document.createElement("button");
          fullscreen_button.setAttribute('id','fullscreen-button');
          fullscreen_button.addEventListener("click", toggle_fullscreen);
          fullscreen_button.innerHTML = `
            <svg viewBox="0 0 24 24">
              <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 
              7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>
            </svg>
            <svg viewBox="0 0 24 24">
              <path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 
              11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"/>
            </svg>
          `;
          document.body.appendChild(fullscreen_button);
        }

        // Play Video functionality
        const play_video_button = document.createElement("button");
        play_video_button.setAttribute('id','play-video-button');
        play_video_button.addEventListener("click", playVideo);
        play_video_button.innerHTML = `
          <svg viewBox="0 0 24 24">
            <path d="M8 5v14l11-7z"/>
          </svg>
        `;
        document.body.appendChild(play_video_button);

        function toggle_fullscreen() {
          if (!document.fullscreenElement) {
            document.body.requestFullscreen();
            document.body.setAttribute("fullscreen",""); 
          } else {
            document.exitFullscreen();
            document.body.removeAttribute("fullscreen"); 
          }
        }

        function playVideo() {
          const videoPlayer = document.getElementById('video-player');
          const videoElement = document.getElementById('video-element');
          
          // Show video player
          videoPlayer.style.display = 'block';
          
          // Request fullscreen for the video player
          videoPlayer.requestFullscreen().then(() => {
            // Start playing the video
            videoElement.play();
          }).catch(err => {
            console.log('Fullscreen request failed:', err);
            // Still play the video even if fullscreen fails
            videoElement.play();
          });
        }

        function closeVideo() {
          const videoPlayer = document.getElementById('video-player');
          const videoElement = document.getElementById('video-element');
          
          // Stop the video
          videoElement.pause();
          videoElement.currentTime = 0;
          
          // Hide video player
          videoPlayer.style.display = 'none';
          
          // Exit fullscreen if we're in it
          if (document.fullscreenElement) {
            document.exitFullscreen();
          }
        }
      </script>

      <footer
        class="w-full text-center p-4 text-slate-400 text-sm absolute bottom-0 z-10 text-2xl"
      >
        Powered By
        <span
          class="text-yellow-400 font-semibold"
          style="
            text-shadow: 0 0 6px rgba(250, 204, 21, 0.9),
              0 0 12px rgba(250, 204, 21, 0.6);
          "
        >
          Apegres®
        </span>
      </footer>
    </body>
  </div>
</html>
